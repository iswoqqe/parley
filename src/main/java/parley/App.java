/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package parley;

import parley.ecs.actiongen.Movement;
import parley.ecs.components.Position;
import parley.ecs.components.RandomActor;
import parley.ecs.components.Texture;
import parley.ecs.core.*;
import parley.ecs.events.Act;

import java.util.ArrayList;
import java.util.List;

public class App {
    public static void main(String[] args) throws InterruptedException {
        ArrayList<Entity> entities = new ArrayList<>();

        for (int i = 0; i < 10; ++i) {
            ArrayList<IComponent> components = new ArrayList<>();
            components.add(new Position(10, 10));
            components.add(new Texture('@'));
            components.add(new RandomActor());

            entities.add(new Entity(components));
        }

        GameState state = new GameState(entities);
        Movement movement = new Movement();

        UI ui = new UI();
        ui.update(state);

        while (true) {
            for (Entity entity : entities) {
                List<Action> actions = movement.generate(entity);
                IEvent act = new Act(actions);
                entity.runEvent(act);
            }

            ui.update(state);
            Thread.sleep(100);
        }
    }
}
